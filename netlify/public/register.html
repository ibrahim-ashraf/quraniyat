<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="التسجيل في منصة قرآنيات لتعليم الآيات.">
  <meta name="author" content="منصة قرآنيات لتعليم الآيات">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="التسجيل - منصة قرآنيات لتعليم الآيات | من الحفظ إلى الإتقان">
  <meta property="og:description" content="التسجيل في منصة قرآنيات لتعليم الآيات.">

  <meta name="twitter:title" content="التسجيل - منصة قرآنيات لتعليم الآيات | من الحفظ إلى الإتقان">
  <meta name="twitter:description" content="التسجيل في منصة قرآنيات لتعليم الآيات.">

  <title>التسجيل - منصة قرآنيات لتعليم الآيات</title>

  <link rel="stylesheet" href="style.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@23.3.2/build/css/intlTelInput.css">

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.3.2/build/js/intlTelInput.min.js"></script>

</head>

<body>
  <header>
    <div id="nav-container"></div>
  </header>

  <main>

    <h1>التسجيل</h1>
    <p>مرحبا بكم في صفحة التسجيل الإلكتروني الخاصة بمنصة قرآنيات لتعليم الآيات. يرجى ملء هذا النموذج، والتأكد من صحة البيانات قبل الإرسال.<br>
      إذا كان لديك مخاوف من تعاملنا مع بياناتك، فنوصي بشدة بمراجعة <a href="privacy-policy.html">سياسة الخصوصية الخاصة بنا</a> قبل متابعة التسجيل.</p>

    <section>
      <h2>تسجيل البيانات</h2>
      <form name="register" id="register-form" action="/.netlify/functions/submit" method="post">
        <h3>المعلومات الشخصية</h3>
        <input type="text" name="name" id="name-input" placeholder="الاسم الكامل:" required><br>
        <label for="gender-select">الجنس:</label>
        <select name="gender" id="gender-select" required>
          <option value="ذكر">ذكر</option>
          <option value="أنثى">أنثى</option>
        </select><br>

        <label for="birthdate-picker">تاريخ الميلاد:</label>
        <input type="date" name="birthdate" id="birthdate-picker" required><br>
        <h3>معلومات العنوان</h3>
        <label for="country-select">الدولة:</label>
        <select name="country" id="country-select" required></select><br>
        <input type="text" name="state" id="state-input" placeholder="الولاية/المقاطعة/المحافظة:" required><br>
        <input type="text" name="city" id="city-input" placeholder="المدينة/البلدة:" required><br>
        <input type="text" name="area" id="area-input" placeholder="الحي/المنطقة/القرية:" required><br>
        <input type="number" name="zipcode" id="zipcode-input" placeholder="الرمز البريدي:" required><br>
        <p>إدخالك لمعلومات عنوانك بدقة سيساعدنا في التحقق من هويتك بسهولة. أدخل "لا شيء" في حقول العنوان التي لا تتوفر لديك، وليس لتجاهل إدخال المعلومات.</p>
        <h3>معلومات الاتصال</h3>
        <input type="tel" name="phone" id="phone-input" placeholder="رقم الهاتف:" required><br>
        <input type="email" name="email" id="email-input" placeholder="البريد الإلكتروني (اختياري):"><br>
        <h3>المعلومات التعليمية</h3>
        <p>أخبرنا بالمسار التعليمي الذي تريد أن نتبعه معك، وأخبرنا باختصار بما تريد أن تفعله معنا.</p>
        <textarea name="educational-info" id="educational-info" cols="30" rows="10" placeholder="المعلومات التعليمية:" required></textarea><br>
        <h3>ملاحظات إضافية (اختياري)</h3>
        <p>هل لديك أي ملاحظات إضافية تود إطلاعنا عليها؟ يرجى إخبارنا بها أدناه.</p>
        <input type="text" name="additional-notes" id="additional-notes" placeholder="ملاحظات إضافية (اختياري)">
        <h2>التحقق من أنك إنسان</h2>
        <p>يساعدنا ذلك في حمايتنا من الطلبات العشوائية وغير المرغوب فيها.</p>
        <h3>إعادة إدخال رمز التحدي العشوائي المكون من 4/6 أرقام</h3>
        <p>لقد أنشأنا رمزا عشوائيا مكونا من 4/6 أرقام. يرجى إعادة إدخاله أدناه. هو: <span id="challenge-code-text"></span></p>
        <input type="hidden" name="challenge-code-hidden" id="challenge-code-hidden">
        <input type="number" name="challenge-code-input" id="challenge-code-input" placeholder="رمز التحدي المكون من 4/6 أرقام:" required><br>
        <h3>التحقق عن طريق reCAPTCHA</h3>
        <p>يرجى تحديد مربع reCAPTCHA أدناه؛ للتأكد من أنك إنسان.</p>
        <div class="g-recaptcha" data-sitekey="6LcVNQYqAAAAACqRgKGCml2-HzpoRoPUjddtHvDQ"></div>
        <h2>إبداء الموافقة</h2>
        <p>يرجى الموافقة على أن صحة ودقة بياناتك الواردة في هذا النموذج على مسؤوليتك الشخصية، والموافقة على تسجيل بياناتك والتعامل معها بما يتوافق مع <a href="privacy-policy.html">سياسة الخصوصية الخاصة بنا</a>.</p>
        <label for="agree">أوافق</label>
        <input type="checkbox" name="agree-checkbox" id="agree" value="agree" required><br>
        <input type="submit" id="submit-button" value="إرسال">
      </form>
    </section>
  </main>
  <footer>
    <p>&copy; 2024 منصة قرآنيات لتعليم الآيات. جميع الحقوق محفوظة.</p>
  </footer>

  <script src="loadNav.js"></script>
  <script src="script.js"></script>

  <script>
    document.getElementById('gender-select').selectedIndex = -1;

    const challengeCode = createChallengeCode(Math.floor(Math.random() * 3) + 4);
    document.getElementById('challenge-code-text').innerHTML = challengeCode;
    document.getElementById("challenge-code-hidden").value = challengeCode;

    loadCountries(document.getElementById('country-select'), document.getElementById('phone-input'));

    document.getElementById('register-form').addEventListener('submit', event => {
      event.preventDefault();

      const formData = new FormData(event.target);
      const data = Object.fromEntries(formData);
      data.phone = intlTelInput.getNumber();

      const adminEmail = {
        to: 'ibrahim.ashraf.contact@gmail.com',
        subject: 'بيانات نموذج جديدة',
        text: `بيانات نموذج جديدة:\n\n${JSON.stringify(data, null, 2)}`,
        html: `
          <h1>بيانات نموذج جديدة</h1>
          <pre>${JSON.stringify(data, null, 2)}</pre>
        `
      };

      const userEmail = {
        to: data.email,
        subject: 'مرحبًا بك في منصة قرآنيات لتعليم الآيات!',
        text: `مرحبًا ${data.name},\n\nنحن سعداء بانضمامك إلى عائلة قرآنيات لتعليم الآيات. يسرنا أن نؤكد لك استلام بيانات تسجيلك بنجاح.\n\nستتلقى منا قريبًا جميع المعلومات الضرورية لتبدأ رحلتك معنا. نأمل أن تكون تجربتك معنا مليئة بالفائدة والإلهام.\n\nإذا كان لديك أي استفسارات، لا تتردد في التواصل معنا. نحن هنا لدعمك في كل خطوة.\n\nمع خالص التحية والتقدير،\nفريق منصة قرآنيات لتعليم الآيات`,
        html: `
          <h1 style="color: #2C3E50;">مرحبًا ${data.name},</h1>
          <p style="font-size: 1.2em; color: #34495E;">نحن سعداء بانضمامك إلى عائلة قرآنيات لتعليم الآيات. يسرنا أن نؤكد لك استلام بيانات تسجيلك بنجاح.</p>
          <p style="font-size: 1.2em; color: #34495E;">ستتلقى منا قريبًا جميع المعلومات الضرورية لتبدأ رحلتك معنا. نأمل أن تكون تجربتك معنا مليئة بالفائدة والإلهام.</p>
          <p style="font-size: 1.2em; color: #34495E;">إذا كان لديك أي استفسارات، لا تتردد في التواصل معنا. نحن هنا لدعمك في كل خطوة.</p>
          <p style="font-size: 1.2em; color: #34495E;">مع خالص التحية والتقدير،</p>
          <p style="font-size: 1.2em; color: #34495E;">فريق منصة قرآنيات لتعليم الآيات</p>
        `
      };

      submitForm(data, 'register_form', adminEmail, userEmail)
        .then(result => {
          if (!result.error) {
            alert('تم التسجيل بنجاح. سنتواصل معك بمشيئة الله تعالى في أسرع وقت ممكن.');
          }
        })
        .catch(error => {
          if (error.message === 'server') {
            alert('حدث خطأ في الخادم. يرجى التحقق من حل تحدي reCAPTCHA أو إعادة المحاولة لاحقًا.');
          } else {
            alert('تعذر الاتصال بالخادم. تأكد من اتصالك بالإنترنت وحاول مرة أخرى.');
          }
        });
    });
  </script>

</body>

</html>